<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Variable screening based on ranking by marginal utility — marginal_ranking • AFTCoop</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Variable screening based on ranking by marginal utility — marginal_ranking"><meta property="og:description" content="This function performs marginal ranking of features based on their association with the survival outcome
(see, for example, Fan and Lv (2008) and Fan, Feng and Wu (2010)).
Specifically, it computes the marginal coefficient for each feature in the dataset and s
orts the covariates in decreasing order according to the selected ranking method:
absmg, mg, or mgpadj."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AFTCoop</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Variable screening based on ranking by marginal utility</h1>

    <div class="hidden name"><code>marginal_ranking.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function performs marginal ranking of features based on their association with the survival outcome
(see, for example, Fan and Lv (2008) and Fan, Feng and Wu (2010)).
Specifically, it computes the marginal coefficient for each feature in the dataset and s
orts the covariates in decreasing order according to the selected ranking method:
<code>absmg</code>, <code>mg</code>, or <code>mgpadj</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">marginal_ranking</span><span class="op">(</span></span>
<span>  <span class="va">X</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  <span class="va">delta</span>,</span>
<span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cox"</span>, <span class="st">"AFT"</span><span class="op">)</span>,</span>
<span>  model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"weibull"</span>, <span class="st">"exponential"</span>, <span class="st">"lognormal"</span>, <span class="st">"loglogistic"</span><span class="op">)</span>,</span>
<span>  rank <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"absmg"</span>, <span class="st">"mg"</span>, <span class="st">"mgpadj"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-x">X<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Matrix of covariates correspondig to the view of dimension <code>n x p_{view}</code>, where <code>n</code> is the number of samples and <code>p_{view}</code> is the number of variables in the view.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>Vector of observed survival times in the time-domain or censored times of dimension <code>n</code>, where <code>n</code> is the number of samples.</p></dd>


<dt id="arg-delta">delta<a class="anchor" aria-label="anchor" href="#arg-delta"></a></dt>
<dd><p>Vector of censoring indicators (1 for event, 0 for censored) of dimension  <code>n</code>, where <code>n</code> is the number of samples.</p></dd>


<dt id="arg-family">family<a class="anchor" aria-label="anchor" href="#arg-family"></a></dt>
<dd><p>Character string indicating the type of survival model to fit. Options are <code>cox</code> for Cox Proportional Hazards model and <code>AFT</code> for Accelerated Failure Time model.</p></dd>


<dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>Character string specifying the specific AFT model to use.  It can assume one of the following values: "weibull";"lognormal";"loglogistic". Ignored if <code>family = "cox"</code>.</p></dd>


<dt id="arg-rank">rank<a class="anchor" aria-label="anchor" href="#arg-rank"></a></dt>
<dd><p>Character string specifying the ranking method. It can assume one of the following values: "absmg", "mg" and "mgpadj".</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data frame with the ranked features. The columns include:</p><ul><li><p>ranking:  The rank of the feature based on the selected method.</p></li>
<li><p>symbol: The name of the feature.</p></li>
<li><p>rank: The ranked marginal utility values using one of several methods: <code>absmg</code>, <code>mg</code>, <code>mgpadj</code>.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>This function implements marginal ranking for the features of a matrix <code>X</code> based on their association with survival outcomes in <code>y,delta</code> ,
using either the Cox Proportional Hazards or Accelerated Failure Time (AFT) models.
The functions assume that the feature in <code>X</code>  were already preprocessed to remove irrelevant information and normalized, if necessary.
Such preprocessing depends on the type of variables encoded in matrix <code>X</code>.
Then, it uses the <code>margcoef</code> function to compute the marginal coefficients for each feature,
employing several ranking methods (namely,<code>absmg</code>, <code>mg</code>, or <code>mgpadj</code>) based on marginal utility or adjusted p-values.
The <code>margcoef</code> function, in turn, uses the <code>mg</code> function to calculate the regression coefficients
and adjusted p-values, depending on the specified <code>family</code> (<code>Cox</code> or <code>AFT</code>).
The ranking of the features can be done according to one of the following criteria:</p><ul><li><p><code>absmg</code>: The absolute marginal utility function.</p></li>
<li><p><code>mg</code>: The marginal utility function.</p></li>
<li><p><code>mgpadj</code>: The p-value adjusted according with the marginal utility function.</p></li>
</ul><p>When choosing <code>mgpadj</code>, the adjustment method includes the Benjamini and Hochberg (1995) (<code>BH</code> or its alias <code>fdr</code>) correction.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Last change 08/04/2025</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Benjamini, Y., and Hochberg, Y. (1995). "Controlling the false discovery rate: a practical and powerful approach to multiple testing",
Journal of the Royal Statistical Society Series B, 57, 289–300.
DOI: 10.1111/j.2517-6161.1995.tb02031.x</p>
<p>Fan, J., Feng, Y., and Wu, Y. (2010). "High-dimensional Variable Selection for Cox Proportional Hazards Model".
IMS Collections, 6, 70-86.
DOI: 10.1214/10-IMSCOLL606</p>
<p>Fan, J., and Lv, J. (2008). "Sure independence screening for ultrahigh dimensional feature space",
Journal of the Royal Statistical Society Series B: Statistical Methodology, 70(5), 849-911.
DOI: 10.1111/j.1467-9868.2008.00674.x</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Generate example data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"weibull"</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_data.html">generate_data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  model <span class="op">=</span> <span class="va">model</span>,</span></span>
<span class="r-in"><span>    n <span class="op">=</span> <span class="fl">200</span>,</span></span>
<span class="r-in"><span>    pu <span class="op">=</span> <span class="fl">150</span>,</span></span>
<span class="r-in"><span>    pz <span class="op">=</span> <span class="fl">150</span>,</span></span>
<span class="r-in"><span>    tu <span class="op">=</span> <span class="fl">6</span>,</span></span>
<span class="r-in"><span>    tz <span class="op">=</span> <span class="fl">6</span>,</span></span>
<span class="r-in"><span>    rate <span class="op">=</span> <span class="fl">40</span>,</span></span>
<span class="r-in"><span>    sigma_true <span class="op">=</span> <span class="fl">0.5</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">times_c</span>    <span class="co"># vector of survival times or censored times</span></span></span>
<span class="r-in"><span><span class="va">delta</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">delta</span>  <span class="co"># vector of censoring indicators</span></span></span>
<span class="r-in"><span><span class="va">U</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">U</span>  <span class="co"># matrix corresponding to the first view</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">U</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"feature_"</span>,  <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">U</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Z</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">Z</span>  <span class="co"># matrix corresponding to the second view</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">Z</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"feature_"</span>,  <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">Z</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">screening_U</span> <span class="op">&lt;-</span> <span class="fu">marginal_ranking</span><span class="op">(</span><span class="va">U</span>, <span class="va">y</span>, <span class="va">delta</span>, family <span class="op">=</span> <span class="st">"AFT"</span>, model <span class="op">=</span> <span class="va">model</span>, rank <span class="op">=</span> <span class="st">"absmg"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">screening_U</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">screening_Z</span> <span class="op">&lt;-</span> <span class="fu">marginal_ranking</span><span class="op">(</span><span class="va">U</span>, <span class="va">y</span>, <span class="va">delta</span>, family <span class="op">=</span> <span class="st">"AFT"</span>, model <span class="op">=</span> <span class="va">model</span>, rank <span class="op">=</span> <span class="st">"absmg"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">screening_U</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Claudia Angelini, Daniela De Canditiis, Italia De Feis, Antonella Iuliano.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

