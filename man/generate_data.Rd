% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generate_data.R
\name{generate_data}
\alias{generate_data}
\title{Generate Simulated Survival Accelerated Failure Time model Data with Two Views U and Z.}
\usage{
generate_data(
  model,
  n,
  pu,
  pz,
  tu,
  tz,
  rate = 40,
  sigma_true,
  rl = 40,
  rl_pos = 20,
  snr = 0.8
)
}
\arguments{
\item{model}{Character string specifying the noise distribution. In can assume one of the following values: "weibull", "lognormal", or "loglogistic".}

\item{n}{Integer; number of observations (it must be a positive integer number)}

\item{pu}{Integer; number of covariates in view \code{U} of dimension  \code{n x p_u}}

\item{pz}{Integer; number of covariates in view \code{Z} of dimension  \code{n x p_z}}

\item{tu}{Numeric; strength of view \code{U} in relationship with latent variables \code{L}.}

\item{tz}{Numeric; strength of view \code{Z} in relationship with latent variables \code{L}.}

\item{rate}{Numeric; minimum right censoring rate for the observed survival times.}

\item{sigma_true}{Numeric; true scale parameter for the AFT model}

\item{rl}{Integer; number of relevant latent covariates (default: 40).}

\item{rl_pos}{Integer; number of positively associated latent covariates (default: 20)}

\item{snr}{Numeric; signal-to-noise ratio (default: 0.8)}
}
\value{
A list containing:
\itemize{
\item Y: Log-transformed censored survival times
\item times_c: Original scale censored survival times
\item delta: Censoring indicators (1 = event, 0 = censored)
\item L: Matrix of latent variables
\item beta_L: True coefficients for latent variables
\item U: First view matrix
\item Z: Second view matrix
}
}
\description{
Function generate_data generates simulated survival data for Accelerated Failure Time (AFT) models with two views
here,  \code{U} and \code{Z}, that are correlated with unobserved latent variables (\code{L}).
The two observed views \code{U} and \code{Z} might represent two omics data matrices such as gene expression and methylation. The latent factor \code{L} can represent some unobserved factors that are associated with the survival times.
Some of the observed variables in  \code{U} and \code{Z} are correlated with the latent factors \code{L}.
The simulator allows to consider different proportion of right censoring.
The simulation scheme extends to the AFT models the simulation scheme proposed in Ding et al, 2022 for assessing the performance of cooperative regression,
and it is described in detail in Angelini et al 2025.
The function supports Weibull, Lognormal, and Loglogistic distributions for the error noise.
}
\details{
The data generation process follows these steps:
\itemize{
\item Generates latent variables (L) from normal distribution
\item Creates views U and Z with controlled relationship to \code{L}, to this purpose \code{tu} and \code{tz} represent the correlation among the rl relevant variables in the latent factor \code{L} and the first rl variables in both \code{U} and \code{Z}.
\item Generates survival times based on specified distribution from the latent variables \code{L}.
\item Applies random censoring to achieve desired censoring rate.
}
The function requires the flexsurv package for the loglogistic model.

The function uses the following parameter ranges:
\itemize{
\item Positive coefficients: Uniform(0.1, 1)
\item Negative coefficients: Uniform(-1, -0.1)
\item Censoring: Exponential distribution
}

View strengths (tu, tz) typically use these combinations:
\itemize{
\item (6,6): Strong and equal effect in both views U and Z.
\item (6,4): Strong view in U, moderate effect in Z.
\item (6,2): Strong view in U, weak effect in Z.
\item (6,0): Strong view in U, No effect in Z.
}

The choice of the SNR (default value snr=0.8) allow to generate different challenging scenarios.

The function prints the actual percentage of non-censored observations and
a summary of the censored survival times. If the variance constraints cannot
be satisfied with the given parameters, it will adjust the view variances
and print a warning message.
}
\note{
Last change 05/06/2025
}
\examples{
\dontrun{
# Generate Weibull survival data
data <- generate_data(
  model = "weibull",
  n = 200,
  pu = 150,
  pz = 150,
  tu = 6,
  tz = 6,
  rate = 40,
  sigma_true = 0.5
)

# Access components
Y <- data$Y  # log survival times
delta <- data$delta  # censoring indicators
U <- data$U  # first view
Z <- data$Z  # second view
}

}
\references{
Angelini, De Canditiis, De Feis, Iuliano (in prep. 2025).

Ding, D., Li, S., Narasimhan, B., Tibshirani, R. (2021) \url{doi:10.1073/pnas.2202113119})
}
